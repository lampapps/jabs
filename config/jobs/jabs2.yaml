job_name: "jabs_dev2"  # The name of the backup job (used for logging and organization)
source: "/home/jim2/jabs_dev"  # The source directory to back up
destination: "/media/jim2/backupdrive/jabs_dev"  # The destination directory for local backups

# Backup retention and size settings
keep_sets: 2  # Number of backup sets to retain (older sets will be deleted automatically)
max_tarball_size: 1024  # Maximum size of each tarball in MB (e.g., 1024 MB = 1 GB)

# GPG symmetric encryption for tarballs
encryption:
  enabled: false         # Default, can be overridden by CLI
  method: gpg            # Only 'gpg' supported for now
  passphrase_env: JABS_ENCRYPT_PASSPHRASE  # Name of env var holding passphrase



# Exclusion rules
exclude:
  # General patterns
  - "*.tmp"  # Exclude temporary files
  - "*.bak"  # Exclude backup files (e.g., file.bak)
  - "*.swp"  # Exclude swap files (e.g., Vim swap files)
  - "*.lock"  # Exclude lock files (e.g., file.lock)
  - "cache/"  # Exclude cache directories
  - "node_modules/"  # Exclude Node.js dependencies
  - "venv/"  # Exclude Python virtual environments
  - "build/"  # Exclude build directories (e.g., for compiled code)
  - ".*"  # Exclude all hidden files and directories (e.g., .git, .env)
  - ".DS_Store"  # Exclude macOS-specific metadata files
  - "*.log"  # Exclude log files
  - "*.iso"  # Exclude ISO disk images
  - "*.tar.gz"  # Exclude tarball archives
  - "*.tar"
  - "docs/"  # Exclude a specific directory
  
  # Advanced patterns
  - "__pycache__/"  # Exclude all `__pycache__` directories at any level
  - "**/__pycache__/"  # Exclude all `__pycache__` directories recursively
  - "**/__pycache__/**"  # Exclude all files and subdirectories within any `__pycache__` directory
  - "**/*.class"  # Exclude Java compiled class files recursively
  - "**/temp/**"  # Exclude any directory named "temp" at any level

# AWS S3 settings (for cloud backups)
aws:
  profile: "default"  # AWS CLI profile to use (default if not specified)
  region: "us-east-1"  # AWS region (overrides profile region if specified)
  bucket: "lampapps-jabs-dev"  # S3 bucket name (required for cloud backups)

# --- Scheduling ---
# Define when and how backups should run automatically.
# Requires adding the scheduler.py script to the system crontab (e.g., by running `crontab -e`).
#
# Example Crontab Entry (runs every hour):
# This example assumes your Python virtual environment is located at /home/jim2/jabs3/venv
# Adjust paths as necessary for your setup.
#
# 0 * * * * /home/jim2/jabs3/venv/bin/python /home/jim2/jabs3/scheduler.py
#
# Explanation:
#   0 * * * * : Run at minute 0 of every hour, every day, every month, every day of the week.
#   /home/jim2/jabs3/venv/bin/python : Path to the Python interpreter inside your virtual environment.
#   /home/jim2/jabs3/scheduler.py : Path to the JABS scheduler script.
#
#          Cron Syntax:
#          .---------------- minute (0 - 59)
#          | .------------- hour (0 - 23)
#          | | .---------- day of month (1 - 31)
#          | | | .------- month (1 - 12) OR jan,feb,mar,apr...
#          | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
#          | | | | |                          Both 0 and 7 represent Sunday in many cron versions for historical reasons. 0 is standard.
#          * * * * *
schedules:
  - cron: "0 1 * * 7"  
    type: "full"       # full or diff
    sync: true         # Sync to S3 after backup, true or false
    enabled: true     # Set to false to disable this schedule

  - cron: "0 1 * * 1-6" 
    type: "diff"
    sync: true
    enabled: true

  - cron: "*/5 * * * *" 
    type: "diff"       # Run a differential backup
    sync: true        # Do not sync differential backups
    enabled: false     # This schedule is active

# Example disabled schedule:
#  - cron: "0 0 1 * *"  # Minute 0, Hour 0 (midnight), Day of Month 1, Any Month, Any Day of Week
#    # Runs on the 1st day of every month at midnight (00:00)
#    type: "full"
#    sync: true
#    enabled: false     # This schedule is currently inactive

# Notes:
# - Ensure the `source` directory exists and contains the files you want to back up.
# - The `destination` directory must have sufficient space for the backup sets.
# - The `aws` section is required only if you plan to sync backups to AWS S3.
# - Use the `exclude` list to specify files or directories to skip during the backup process.
# - Advanced examples for `exclude`:
#   - "**/temp/**": Excludes all directories named `temp` at any level of the directory tree.
#   - "**/*.log": Excludes all `.log` files recursively in all subdirectories.
#   - "**/*.tmp": Excludes all `.tmp` files recursively in all subdirectories.
#   - "**/backup_*/": Excludes all directories starting with `backup_` at any level.
#   - "**/202*/": Excludes all directories with names starting with `202` (e.g., year-based directories).
#   - "**/*.{jpg,png,gif}": Excludes all image files with `.jpg`, `.png`, or `.gif` extensions.
#   - "**/!(important).txt": Excludes all `.txt` files except those named `important.txt` (requires extended globbing).
#   - "**/logs/**/debug.log": Excludes `debug.log` files in any `logs` subdirectory.
#   - "**/!(keep_this_dir)/": Excludes all directories except `keep_this_dir` (requires extended globbing).