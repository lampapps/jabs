# =============================================================================
# JABS (Just Another Backup System) Global Configuration Example
# =============================================================================
# Copy this file to 'global.yaml' and customize for your environment.
# This file contains system-wide settings that apply to all backup jobs unless
# overridden in individual job configurations.

# --- Default Backup Job Configuration ---

# Local backup destination - where backup archives are stored locally
# Examples: "/mnt/backup", "/home/user/backups", "/media/external-drive/backups"
destination: "/path/to/directory"      # must be local or mapped drive
keep_sets: 5                           # Number of complete backup sets to retain
                                       # Each 'set' contains full + incremental backups
                                       # Recommended: 3-7 based on storage capacity and retention needs
                                       # Example: 5 sets = ~1-2 months of daily backups

max_tarball_size: 2048                 # Maximum size of each tarball/archive in MB
                                       # Large backup jobs will be split into multiple files
                                       # Recommended: 1024-4096 MB for optimal performance
                                       # Smaller = more files, Larger = longer upload times

use_common_exclude: true               # true | false - Use exclusion patterns from config/common_exclude.yaml
                                       # Excludes common temporary files, caches, and system files
                                       # Recommended: true to reduce backup size

# AWS S3 settings for cloud backups unless overridden in job config
# The `aws` section is required only if you plan to sync backups to AWS S3.
# Bucket name rules:
# - Must be globally unique across all AWS accounts.
# - Must be between 3 and 63 characters long.
# - Can contain lowercase letters, numbers, and hyphens.
# - Must start and end with a letter or number.
# - Cannot contain uppercase letters or underscores.
# - Cannot be formatted as an IP address (e.g., 192.168.5.4).
aws:
  enabled: false  # Default, false can be overridden in job config or by CLI
  region: "us-east-1"  # AWS region (overrides profile region if specified)
  bucket: "example-jabs"  # S3 bucket name (required for cloud backups)
  storage_class: "STANDARD"  # Options: STANDARD, STANDARD_IA, ONEZONE_IA, INTELLIGENT_TIERING, GLACIER, DEEP_ARCHIVE, etc.

# Encryption settings for backups unless overridden in job config
encryption:
  enabled: true  # true | false
  method: gpg  # Only 'gpg' supported for now
  passphrase_env: JABS_ENCRYPT_PASSPHRASE  # Name of env var holding passphrase


# --- Monitoring Configuration ---
# Configure network monitoring for discovering and managing multiple JABS instances
# Useful for monitoring backup status across multiple servers/machines
monitoring:
  enable_monitoring: true               # true | false - Enable monitoring functionality
  shared_monitor_dir: "/path/to/shared/directory"  # Shared directory accessible by all monitored instances
                                        # Examples: "/mnt/nas/jabs-monitor", "/shared/monitoring"
                                        # Must be accessible by all JABS instances you want to monitor
  ip_range_start: "192.168.1.2"         # Start of IP address range for auto-discovery
                                        # Adjust to match your local network range
  ip_range_end: "192.168.1.254"         # End of IP address range for auto-discovery
                                        # Example: 192.168.1.x, 10.0.0.x, etc.
  port: 5000                            # Port number to scan for JABS instances during discovery
                                        # Default JABS web interface port
  default_grace_period: 60              # Grace period in minutes before marking instance as overdue
                                        # How long to wait after scheduled time before alerting
                                        # Recommended: 30-120 minutes depending on backup duration


# --- Dashboard Configuration ---
# Configure what storage locations appear in the web dashboard for monitoring

# Local drives and mount points to display storage usage
drives:
  - path: "/"                          # Root filesystem
    label: "Root"
  - path: "/mnt/backup-drive"           # Example: External backup drive
    label: "Backup Drive"
# - path: "/mnt/nas"                    # Example: Network attached storage
#   label: "NAS Storage"
# - path: "/media/usb-backup"           # Example: USB backup drive
#   label: "USB Backup"

# S3 buckets to monitor (requires valid AWS credentials)
# Remove or comment out if not using S3
s3_buckets:
  - bucket: "example-jabs"              # Replace with your actual S3 bucket names
    label: "JABS"
  - bucket: "example-backup"
    label: "Backup"
# - bucket: "company-archive"           # Example: Long-term archive bucket
#   label: "Archive"

# --- Email Notification Configuration ---
# Configure SMTP email notifications for backup events
# Requires JABS_SMTP_USER and JABS_SMTP_PASS environment variables in .env file

email:
  smtp_server: "smtp.zoho.com"         # SMTP server hostname
                                      # Common examples:
                                      # Gmail: smtp.gmail.com
                                      # Outlook: smtp-mail.outlook.com  
                                      # Yahoo: smtp.mail.yahoo.com
                                      # Zoho: smtp.zoho.com
  smtp_port: 587                      # SMTP port number
                                      # 587 = TLS (recommended for most providers)
                                      # 465 = SSL, 25 = unencrypted (not recommended)
  to_addrs:                           # List of email addresses to receive notifications
    - "admin@example.com"             # Replace with actual email addresses
    - "backup-admin@company.com"       # Add multiple recipients as needed
#   - "it-team@example.com"           # Uncomment and modify as needed
  use_tls: true                       # true | false - Use TLS encryption
                                      # Recommended: true for security
  digest_email_schedule: "0 8 * * *"   # CRON schedule for daily digest emails
                                      # "0 8 * * *" = Every day at 8:00 AM
                                      # "0 18 * * 1" = Every Monday at 6:00 PM
                                      # Use https://crontab.guru for help with CRON syntax

  # Configure which backup events trigger email notifications
  notify_on:
    error:
      enabled: true                   # true | false - Send error notifications
      mode: immediate                 # immediate = send right away, digest = include in daily email
    backup_complete:
      enabled: true                   # Notify when backups complete successfully
      mode: digest                    # Usually better as digest to avoid email spam
    restore_complete:
      enabled: true                   # Notify when file restores complete
      mode: digest

